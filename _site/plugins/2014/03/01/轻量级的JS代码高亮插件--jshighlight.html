<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="/stylesheets/layout.css">
    <link rel="stylesheet" href="/stylesheets/jshighlight-custom.css"/>
    <link rel="shortcut icon" href="/images/code.png"/>
    <title>轻量级的JS代码高亮插件-jshighlight-ImF2e</title>
</head>

<body>
<!-- HEADER -->
<div class="mod-header outer">
    <header class="content">
        <div class="title">
            <h2 class="blog-title">ImF2e</h2>
            <p class="blog-desc">I'm Front End Engineer</p>
        </div>
        <nav class="mod-nav">
            <ul>
                
                <li>
                    <a class="" href="/">Index</a>
                </li>
                
                <li>
                    <a class="" href="/snippets.html">Snippets</a>
                </li>
                
                <li>
                    <a class="" href="/plugins.html">Plugins</a>
                </li>
                
            </ul>
        </nav>
    </header>
</div>
<!-- MAIN CONTENT -->
<div class="mod-content outer">
    <div class="post">
        <h1>轻量级的JS代码高亮插件-jshighlight</h1>
        <p class="description">
            <time pubdate="2014-03-01">2014-03-01</time>
        </p>
        <p><img src="/images/content/plugins/jshighlight/jshighlight.jpg" alt="jshighlight" /></p>

<p>jshighlight-一款基于javascript的轻量级的代码着色插件，这个插件使用比较简单，而且代码比较少。 虽然原生只支持html、css、javascript，但是它也可以被扩展以支持其他的语言，下面会讲到怎么去扩展它 ，本博客使用以查看这篇文章中的代码，下面简要介绍一下她的一些信息</p>

<h2 id="">插件特点</h2>

<ul>
<li>
<p>真正轻量级，JS代码压缩后3K左右；</p>
</li>

<li>
<p>调用方便，引入jshighlight核心js文件即可；</p>
</li>

<li>
<p>不依赖于任何其他库；</p>
</li>

<li>
<p>原生支持HTML、CSS、Javascript；</p>
</li>

<li>
<p>支持其他语言的轻松扩展；</p>
</li>

<li>
<p>显示行号，直接复制代码不会复制行号；</p>
</li>

<li>
<p>提供四套主题可选，默认使用<code>Monokai</code>样式主题；</p>
</li>
</ul>

<h2 id="_2">使用步骤</h2>

<ol>
<li>
<p>在<code>&lt;head&gt;</code>中引入相应的样式文件：</p>

<pre><code> &lt;!--默认样式--&gt; 
 &lt;link href=&quot;../theme/jshighlight-default.css&quot; rel=&quot;stylesheet&quot; /&gt;</code></pre>
</li>

<li>
<p>在<code>&lt;/body&gt;</code>前中引入相应js文件：</p>

<pre><code> &lt;!--核心js文件--&gt; 
 &lt;script src=&quot;../js/jshighlight.core-v1.0.1.min.js&quot;&gt;&lt;/script&gt;</code></pre>
</li>

<li>
<p>在需要着色的pre标签中加入<code>data-language</code>属性，取值为：<code>javascript|html|css</code>，扩展后可以设置其他的值；</p>
</li>
</ol>

<h2 id="_3">如何扩展</h2>

<ol>
<li>
<p>在<code>&lt;body&gt;</code>中引入相应js文件：</p>

<pre><code> &lt;script src=&quot;../js/jshighlight.core-v1.0.0.min.js&quot;&gt;&lt;/script&gt; </code></pre>
</li>

<li>
<p>自定义需要着色的语言所需要的样式，例如：</p>

<pre><code> .php-com{
     color: #CCC;
 }
 .php-mrk{
     color: red;
     font-weight: bold;
 }
 .php-bol{
     color: #F92665;
     font-style: italic;
 }
 .php-var{
     color: #A6E22E;
 }
 /*.......*/
 /* 也可以使用默认的样式，传入默认样式类名即可，
  * 样式名称可以自由使用，比如注释对应的样式也可以用.key
  * 默认样式如下：
  */
 .com{ color:#75715E } /*普通注释*/
 .doc{ color:#48BEEF } /*文档注释*/
 .str{ color:#E6DB74 } /*字符串*/
 .key{ color:#48BEEF; font-weight: bold; font-style: italic } /*关键字*/
 .obj{ color:#AE81FF; font-weight:bold } /*内置对象、函数*/
 .num{ color:#F92672 } /*数字*/
 .ope{ color:#FD971F } /*操作符*/
 .bol{ color:#FF5600; font-style: italic } /*布尔值*/
 
 .mrk{ color:#F92665 } /*html标签*/
 .attr{ color:#A6E22E } /*属性名称*/
 .val{ color:#E6DB74 } /*属性值*/</code></pre>
</li>

<li>
<p>定义提取需要着色的内容的正则，比如：</p>

<pre><code> &#39;com&#39; : /(\/\*[\s\S]*?\*\/|\/\/.*|&amp;lt;\!--[\s\S]*?--&amp;gt;)/, //普通注释 
 &#39;mrk&#39; : /(&amp;lt;\?php|\?&amp;gt;)/, //标签 
 &#39;str&#39; : /(&#39;(?:(?:\\&#39;|[^&#39;\r\n])*?)&#39;|&quot;(?:(?:\\&quot;|[^&quot;\r\n])*?)&quot;)/, //字符串</code></pre>
</li>

<li>
<p>调用<code>JSHL</code>的<code>extendLanguage</code>方法：</p>

<pre><code> JSHL.extendLanguage(&#39;php&#39;,{
    /*
     * 每个分组对应的样式类名
     * 比如：&#39;com&#39;中有一个分组，&#39;mrk&#39;中有一个分组，&#39;key&#39;中有两个分组，
     * 那么： com中的分组对应&#39;php-com&#39;,&#39;mrk&#39;中的分组对应
     * &#39;php-mrk&#39;,&#39;key&#39;中的第一个分组对应&#39;str&#39;,第二个对应&#39;key&#39;，以此类推；
     */
    cls : [&#39;php-com&#39;,&#39;php-mrk&#39;,&#39;str&#39;,&#39;key&#39;,&#39;php-var&#39;,&#39;obj&#39;,&#39;num&#39;,&#39;php-bol&#39;,&#39;ope&#39;],
    reg : {
         &#39;com&#39; : /(\/\*[\s\S]*?\*\/|\/\/.*|&lt;\!--[\s\S]*?--&gt;)/,  //普通注释
         &#39;mrk&#39; : /(&lt;\?php|\?&gt;)/, //标签
         &#39;str&#39; : /(&#39;(?:(?:\\&#39;|[^&#39;\r\n])*?)&#39;|&quot;(?:(?:\\&quot;|[^&quot;\r\n])*?)&quot;)/, //字符串
         &#39;key&#39; : /(?:[^$_@a-zA-Z0-9])?(and|or|...|throw)(?![$_@a-zA-Z0-9])/, //关键字
         &#39;var&#39; : /(\$[\w][\w\d]*)/, //变量名
         &#39;obj&#39; : /(?:[^$_@A-Za-z0-9])?(echo|...|date)(?:[^$_@A-Za-z0-9])/, //内置函数(部分)
         &#39;num&#39; : /\b(\d+(?:\.\d+)?(?:[Ee][-+]?(?:\d)+)?)\b/,  //数字
         &#39;bol&#39; : /(?:[^$_@A-Za-z0-9])?(true|false)(?:[^$_@A-Za-z0-9])/, //布尔值
         &#39;ope&#39; : /(==|=|===|\+|-|\+=|-=|\*=|\\=|%=|&lt;|&lt;=|&gt;|&gt;=|\.)/  //操作符
     },
     //如果这个语言是包含在html中的设置下列属性
     wrapper: &#39;html&#39;,
     content : {
         lang : &#39;php&#39;, // 语言名称，在于pre标签的data-language一致
         wrapper : /()/g // 需要着色的代码被包裹的形式
     }
 })</code></pre>
</li>
</ol>

<h2 id="_4">实际效果</h2>

<h3 id="default_thememonokai">Default Theme–Monokai</h3>

<p><img src="/images/content/plugins/jshighlight/default.png" alt="Default theme" /></p>

<h3 id="iplastic_theme">iPlastic Theme</h3>

<p><img src="/images/content/plugins/jshighlight/iPlastic.png" alt="iPlastic theme" /></p>

<h3 id="eiffel_theme">Eiffel Theme</h3>

<p><img src="/images/content/plugins/jshighlight/Eiffel.png" alt="Eiffel theme" /></p>

<h3 id="blackboard_theme">Blackboard Theme</h3>

<p><img src="/images/content/plugins/jshighlight/Blackboard.png" alt="Blackboard theme" /></p>
    </div>
</div>
<div class="mod-disqus">
     <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'imf2e'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

</div>
<!-- FOOTER  -->
<div class="mod-footer outer">
    <footer class="content">
        <p class="copyright">ImFee maintained by <a href="https://github.com/daiying-zhang">daiying-zhang</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
    </footer>
</div>
<script src="/javascripts/jshighlight.core-v1.0.2.src.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-48347993-1', 'imf2e.com');
  ga('send', 'pageview');
</script>

</body>
</html>
