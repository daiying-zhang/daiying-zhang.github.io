---
layout: default
title: JS中你可能没注意到的细节（2）
category: article
---

在 [JS中你可能没注意到的细节（1）](./JS中你可能没注意到的细节（1）.html) 中，提到了算术运算中溢出/下溢/除零/舍入误差的一些细节。
今天继续说一些运算符中的细节:

## "==" && "if"

    console.clear();
    (function f(){
        var m=undefined;// 显示地赋初始值为undefined
        console.log('m='+m);// =>  m=undefined
        if(!m){
            console.log('!m为true');// 这一句可以执行
        }
        console.log(m==false);// => false
        console.log(null==false);// => false
    })()

看到这个代码,我们不禁会问:为什么第六行可以执行,而第八九行却输出`false`呢?

开始也觉得这很奇怪,后来查资料后发现: **运算符"=="并不会把操作数转换成布尔值**，虽然`null`、`undefined`为“假值”(可以被转换成`false`的值)，
但是“==”运算符并不把操作数转化为bool值，所以`undefined==false`执行结果为`false`，而在`if`语句中，会将`undefined`转换成`false`。

所以第六行代码可以执行。

## "null" && "undefined"

虽然两者都可以表示“值的空缺”，`null==undefined`也为`true`，但是他们在转化为数值时却不一样，先看代码：

    (function f(){
       console.clear();
       console.log(1+null);  // => 1
       console.log(1+undefined); // => NaN
    })()

可见:`null`转化成了`0`，而`undefined`转换成了`NaN`；

对于`null`和`undefined`其他的区别，大家可以百度或者Google一下，这里就不说了（或者以后再说~）。

## 加号运算符和比较运算符

还是先看看下面的代码：

    (function f(){
       console.clear();
       console.log(10+2);  // => 12 数字相加
       console.log(10+'2'); // => 102 10转换成字符串然后连接
       console.log('10'+'2'); // => 102 字符串连接

       console.log(10<2); // => false 数字比较
       console.log(10<'2'); // => false '2'转换成数字
       console.log('10'<'2'); // => true 字符串比较
    })()

我们看到第四行和第八行,虽然两个操作数一样,但是比较运算符和加号运算符对两个操作数的对待却不一样:

* **加号运算符更喜欢字符串,比较运算符更喜欢数字**;

* **加号运算符中,如果都是数字才数字相加**;

* **比较运算符中,两操作数都是字符串才进行字符串比较**;

所以第四行中将10当做字符串处理了,而第八行将'2'当做数字处理了.